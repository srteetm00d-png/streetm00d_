<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STREETMOOD â€” CatÃ¡logo Premium</title>
    <link rel="icon" type="image/jpeg" href="streetm00d_.jpeg">
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
<style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #121212;
            --accent-red: #e50914;
            --accent-red-hover: #ff1e1e;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --glass: rgba(255, 255, 255, 0.04);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .product-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(255, 30, 30, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }
        
        .product-card:hover::before {
            opacity: 1;
        }
        
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(229, 9, 20, 0.2), 0 0 30px rgba(229, 9, 20, 0.1);
        }
        
        .product-image {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover .product-image {
            transform: scale(1.1);
        }
        
        .drop-badge {
            background: linear-gradient(135deg, #e50914 0%, #ff1e1e 100%);
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(229, 9, 20, 0.5); }
            50% { box-shadow: 0 0 20px rgba(229, 9, 20, 0.8); }
        }
        
        .modal-overlay {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tagline {
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-secondary);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-red) 0%, var(--accent-red-hover) 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(229, 9, 20, 0.4);
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.1);
        }
        
        .tab-button {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent-red);
        }
        
</style>
</head>
<body>
    <!-- Header -->
    <header class="sticky top-0 z-40 glass-effect border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-red-600 to-red-500 rounded-xl flex items-center justify-center overflow-hidden shadow-lg">
                        <img src="streetm00d_.jpeg" alt="STREETMOOD Logo" class="w-full h-full object-contain" onerror="this.style.display='none'; this.parentElement.innerHTML='<span class=\'font-black text-xl text-black\'>SM</span>';">
                    </div>
                    <div>
                        <h1 class="text-2xl font-black tracking-tight uppercase">STREETMOOD</h1>
                        <p class="tagline mt-1">Qualquer vibe, qualquer ocasiÃ£o.</p>
                    </div>
                </div>
                <button onclick="openWhatsApp()" class="btn-primary px-6 py-3 rounded-xl font-bold text-sm uppercase tracking-wide">
                    WhatsApp
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Page Title Section -->
        <div class="mb-8 text-center">
            <h2 class="text-xl md:text-2xl font-black mb-4 text-white leading-relaxed">
                Todos os produtos STREETMOOD â€” Sneakers e roupas exclusivas que combinam com o teu estilo.
            </h2>
        </div>

        <!-- Tabs -->
        <div class="flex gap-4 mb-8 border-b border-white/10">
            <button onclick="switchTab('sneakers')" class="tab-button active px-6 py-3 font-bold text-sm uppercase tracking-wide text-white" data-tab="sneakers">
                ðŸ‘Ÿ Sneakers
            </button>
            <button onclick="switchTab('roupas')" class="tab-button px-6 py-3 font-bold text-sm uppercase tracking-wide text-gray-400" data-tab="roupas">
                ðŸ‘• Roupas
            </button>
            </div>

        <!-- Filters -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="relative">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Pesquisar modelo..." 
                    class="search-input w-full px-4 py-3 rounded-xl text-white placeholder-gray-500 focus:outline-none"
                    oninput="filterProducts()"
                >
            </div>
            <select id="categorySelect" onchange="filterProducts()" class="search-input w-full px-4 py-3 rounded-xl text-white focus:outline-none">
                <option value="all">Todas as categorias</option>
                <option value="stock">Em stock</option>
                <option value="drop">Fresh Drop</option>
            </select>
            <select id="sortSelect" onchange="filterProducts()" class="search-input w-full px-4 py-3 rounded-xl text-white focus:outline-none">
                <option value="all">Todos (com imagem primeiro)</option>
                <option value="new">Mais recentes</option>
                <option value="name">Ordenar por nome</option>
                <option value="price-asc">PreÃ§o: menor â†’ maior</option>
                <option value="price-desc">PreÃ§o: maior â†’ menor</option>
            </select>
        </div>

            <!-- Products Grid -->
        <div id="productsGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            <!-- Products will be loaded here -->
        </div>

        <!-- Pagination -->
        <div id="pagination" class="flex justify-center items-center gap-2 mt-12 mb-8">
            <!-- Pagination buttons will be inserted here -->
            </div>

            <!-- Info Tags -->
        <div class="flex flex-wrap gap-3 mt-12 justify-center">
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                ðŸšš Envio grÃ¡tis
            </div>
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                ðŸ“¦ Caixa STREETMOOD incluÃ­da
            </div>
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                +5â‚¬ por caixa original
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-16 py-8 border-t border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-center md:text-left">
                    <p class="font-bold text-lg mb-2">STREETMOOD</p>
                    <p class="text-gray-400 text-sm">Fresh drops, encomendas e exclusividades.</p>
                    <p class="text-gray-500 text-xs mt-1">Envio grÃ¡tis ðŸ‡µðŸ‡¹ â€¢ Caixa STREETMOOD incluÃ­da (+5â‚¬ se quiser a original)</p>
                </div>
                <div class="flex gap-6 items-center">
                    <a href="https://instagram.com/streetm00d" target="_blank" class="text-gray-400 hover:text-white transition-colors font-semibold">
                        Instagram
                    </a>
                    <span class="text-gray-500">â€¢</span>
                    <a href="https://wa.me/351929461628" target="_blank" class="text-gray-400 hover:text-white transition-colors font-semibold">
                        WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="productModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 modal-overlay">
        <div class="absolute inset-0 bg-black/80" onclick="closeModal()"></div>
        <div class="modal-content relative bg-gray-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto glass-effect border border-white/10">
            <div class="p-6">
                <!-- Modal Header -->
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 id="modalTitle" class="text-2xl font-black uppercase mb-2"></h2>
                        <div id="modalBadge" class="mb-2"></div>
                    </div>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Image Viewer -->
                    <div id="modalViewer" class="bg-gray-800 rounded-xl overflow-hidden min-h-[350px] flex items-center justify-center">
                        <!-- Content will be inserted here -->
                </div>

                <!-- Product Details -->
                    <div>
                        <div class="mb-4">
                            <p id="modalPrice" class="text-3xl font-black text-red-500 mb-2"></p>
                            <p id="modalTag" class="text-gray-400 text-sm mb-4"></p>
                        </div>
                        
                        <p id="modalDescription" class="text-gray-300 mb-6 leading-relaxed"></p>
                        
                        <button 
                            id="reserveBtn" 
                            onclick="contactSeller()" 
                            class="btn-primary w-full py-4 rounded-xl font-bold text-lg uppercase tracking-wide mb-4"
                        >
                            ðŸ’¬ Comprar via WhatsApp
                        </button>
                        
                        <button 
                            onclick="reserveProduct()" 
                            class="glass-effect w-full py-4 rounded-xl font-bold text-lg uppercase tracking-wide mb-4 hover:bg-white/10 transition-colors"
                        >
                            ðŸ“Œ Reservar
                        </button>

                        <div class="glass-effect p-4 rounded-xl text-sm text-gray-300 space-y-2">
                        <p>âœ“ Envio grÃ¡tis â€¢ Caixa STREETMOOD incluÃ­da</p>
                        <p>âœ“ Caixa original disponÃ­vel (+5â‚¬)</p>
                        <p>âœ“ Fotos antes do envio</p>
                        </div>
                        
                        <p class="text-center text-gray-500 text-sm mt-6 font-semibold">
                            STREETMOOD â€” Qualquer vibe, qualquer ocasiÃ£o.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load products from streetmood_products.js -->
    <script src="streetmood_products.js"></script>
    <script>
        // Garantir que products estÃ¡ disponÃ­vel globalmente
        if (typeof products !== 'undefined') {
            window.products = products;
            console.log('âœ… Products carregados:', window.products.length);
        } else {
            console.error('âŒ Products nÃ£o definido em streetmood_products.js');
            window.products = [];
        }

        // WhatsApp number oficial STREETMOOD
        const WHATSAPP_NUMBER = '351929461628';
        const INSTAGRAM_URL = 'https://instagram.com/streetm00d';

        let currentProducts = window.products || [];
        let activeTab = 'sneakers';
        let currentProduct = null;
        let currentPage = 1;
        const productsPerPage = 20;

        // Initialize
        AOS.init({
            duration: 800,
            easing: 'ease-out-cubic',
            once: true
        });

        // Available images from imagens_produtos folder (including subfolders and multiple images per product)
        // This array includes all images: _1.jpg, _2.jpg, _3.jpg, etc., and images from subfolders
        const availableImages = [
            // Main folder images
            "Air Jordan 312_1.jpg",
            "Air Jordan 4 Retro_1.jpg",
            "Air Jordan 4 Retro_2.jpg",
            "Air Jordans 1 CD4487-100_1.jpg",
            "Air Jordans 1 CD4487-100_2.jpg",
            "Air Jordans 1 High University Blue 555088-134_1.jpg",
            "Air Jordans 1 High University Blue 555088-134_2.jpg",
            "AIR JORDANS 1 HIGH ZOOM \"Racer Blue\" CK6637-104_1.jpg",
            "AIR JORDANS 1 HIGH ZOOM \"Racer Blue\" CK6637-104_2.jpg",
            "AIR JORDANS 1 LOW \"Mystic Green\"553558-113_1.jpg",
            "AIR JORDANS 1 LOW \"Mystic Green\"553558-113_2.jpg",
            "Air Jordans 1 Mid (GS)555112-500_1.jpg",
            "Air Jordans 1 Mid (GS)555112-500_2.jpg",
            "Air Jordans 1 Mid GS \"Light Smoke Grey\"554724-092_1.jpg",
            "Air Jordans 1 Mid GS \"Light Smoke Grey\"554724-092_2.jpg",
            "Air Jordans 1 Mid SE 852542-400_1.jpg",
            "Air Jordans 1 Mid SE 852542-400_2.jpg",
            "Air Jordans 1 MID SE \"South Beach\"852542-306_1.jpg",
            "Air Jordans 1 MID SE \"South Beach\"852542-306_2.jpg",
            "Air Jordans 1 Mid 'Candy' 554725-083_1.jpg",
            "Air Jordans 1 Mid 'Candy' 554725-083_2.jpg",
            "Air Jordans 1 Mid \"Black Cone\" 554724-062_1.jpg",
            "Air Jordans 1 Mid \"Black Cone\" 554724-062_2.jpg",
            "Air Jordans 1 Mid \"Chicago Black Toe\" 554724-069_1.jpg",
            "Air Jordans 1 Mid \"Chicago Black Toe\" 554724-069_2.jpg",
            "Air Jordans 1 Mid \"Lakers Top 3\"852542-005_1.jpg",
            "Air Jordans 1 Mid \"Lakers Top 3\"852542-005_2.jpg",
            "Air Jordans 1 Mid \"Multicolor\" 554724-125_1.jpg",
            "Air Jordans 1 Mid \"Multicolor\" 554724-125_2.jpg",
            "Air Jordans 1 MID \"Top 3\" 554724-124_1.jpg",
            "Air Jordans 1 MID \"Top 3\" 554724-124_2.jpg",
            "Air Jordans 1 Retro High CN8607-002_1.jpg",
            "Air Jordans 1 Retro High CN8607-002_2.jpg",
            "Air Jordans 1 Retro High Co.JP 'Midnight Navy' DC1788-100_1.jpg",
            "Air Jordans 1 Retro High Co.JP 'Midnight Navy' DC1788-100_2.jpg",
            "Air Jordans 1 Retro High OG GS \"Crimson Tint\" 555088-081_1.jpg",
            "Air Jordans 1 Retro High OG GS \"Crimson Tint\" 555088-081_2.jpg",
            "Air Jordans 11 Retro 'Gamma Blue' 378038-006_1.jpg",
            "Air Jordans 11 Retro 'Gamma Blue' 378038-006_2.jpg",
            "Air Jordans 3 Retro 'Red Cement' CT8532-104_1.jpg",
            "Air Jordans 3 Retro 'Red Cement' CT8532-104_2.jpg",
            "Air Jordans 3 'Lazer Orange' CK9246-108_1.jpg",
            "Air Jordans 3 'Lazer Orange' CK9246-108_2.jpg",
            "Air Jordans 4 Bred 408452-060_1.jpg",
            "Air Jordans 4 Bred 408452-060_2.jpg",
            "Air Jordans 4 Retro SP 'Union â€“ Guava Ice DC9533-009_1.jpg",
            "Air Jordans 4 Retro SP 'Union â€“ Guava Ice DC9533-009_2.jpg",
            "Air Jordans 4 Retro 'University Blue' CT8527-400_1.jpg",
            "Air Jordans 4 Retro 'University Blue' CT8527-400_2.jpg",
            "Air Jordans 4 Retro \"White Oreo\" CT8527-100_1.jpg",
            "Air Jordans 4 Retro \"White Oreo\" CT8527-100_2.jpg",
            "Air Jordans 4 Retro_1.jpg",
            "Air Jordans 4 Retro_2.jpg",
            "Air Jordans 4 'Black Cat' CU1110-010_1.jpg",
            "Air Jordans 4 'Black Cat' CU1110-010_2.jpg",
            "Air Jordans 4 'Fire Red' DC7770-160_1.jpg",
            "Air Jordans 4 'Fire Red' DC7770-160_2.jpg",
            "Air Jordans 4 'Off Noir' DC9533-001_1.jpg",
            "Air Jordans 4 'Off Noir' DC9533-001_2.jpg",
            "Air Jordans 4 'PSG' CZ6509-100_1.jpg",
            "Air Jordans 4 'PSG' CZ6509-100_2.jpg",
            "Air Jordans 4 'Pure Money' 308497-100_1.jpg",
            "Air Jordans 4 'Pure Money' 308497-100_2.jpg",
            "Jordan 13 Retro Black White Gum_1.jpg",
            "Jordan 13 Retro Black White Gum_2.jpg",
            "Jordan 13 Retro Brave Blue_1.jpg",
            "Jordan 13 Retro Brave Blue_2.jpg",
            "Jordan 13 Retro French Blue_1.jpg",
            "Jordan 13 Retro French Blue_2.jpg",
            "Jordan 4 Retro Cool Grey (2019)_1.jpg",
            "Jordan 4 Retro Cool Grey (2019)_2.jpg",
            "Jordan 4 Retro Flight Nostalgia_1.jpg",
            "Jordan 4 Retro Flight Nostalgia_2.jpg",
            "Jordan 4 Retro Lightning (2021)_1.jpg",
            "Jordan 4 Retro Lightning (2021)_2.jpg",
            "Jordan 4 Retro Metallic Green_1.jpg",
            "Jordan 4 Retro Metallic Green_2.jpg",
            "Jordan 4 Retro Metallic Red_1.jpg",
            "Jordan 4 Retro Metallic Red_2.jpg",
            "Jordan 4 Retro Motorsports (2017)_1.jpg",
            "Jordan 4 Retro Motorsports (2017)_2.jpg",
            "Jordan 4 Retro SE 95 Neon_1.jpg",
            "Jordan 4 Retro SE 95 Neon_2.jpg",
            "Jordan 4 Retro Thunder (2012)_1.jpg",
            "Jordan 4 Retro Thunder (2012)_2.jpg",
            "Jordan Air Jordan 3 Barely Grape Pink Purple_1.jpg",
            "Jordan Air Jordan 3 Barely Grape Pink Purple_2.jpg",
            "Jordan Air Jordan 3 Retro Black Gold Black gold_1.jpg",
            "Jordan Air Jordan 3 Retro Black Gold Black gold_2.jpg",
            "Jordan Air Jordan 3 retro true blue White Blue_1.jpg",
            "Jordan Air Jordan 3 retro true blue White Blue_2.jpg",
            "Jordan Air Jordan 3 tinker black and white_1.jpg",
            "Jordan Air Jordan 3 tinker black and white_2.jpg",
            "Jordans 1 Mid White Black Light Arctic Pink 555112-103_1.jpg",
            "Jordans 1 Mid White Black Light Arctic Pink 555112-103_2.jpg",
            "Jordans 1 Retro High \"Homage To Home\" 555088-001_1.jpg",
            "Jordans 1 Retro High \"Homage To Home\" 555088-001_2.jpg",
            "Nike ACG Mountain Fly 2 Black_1.jpg",
            "Nike ACG Mountain Fly 2 Gerry_1.jpg",
            "Nike ACG Mountain Fly 2 Gerry_2.jpg",
            "Nike ACG Mountain Fly 2_1.jpg",
            "Nike ACG Mountain Fly 2_2.jpg",
            "Nike Air Jordan 5_1.jpg",
            "Nike Air Jordan 5_2.jpg",
            "Nike Air Jordan 6 Retro Black Infrared_1.jpg",
            "Nike Air Jordan 6 Retro Black Infrared_2.jpg",
            "Nike Air Jordan 6 Retro Carmine (2014)_1.jpg",
            "Nike Air Jordan 6 Retro Carmine (2014)_2.jpg",
            "Nike Air Jordan 6 Retro Chrome Metallic Silver_1.jpg",
            "Nike Air Jordan 6 Retro Chrome Metallic Silver_2.jpg",
            "Nike Air Jordan 6 Retro DMP 2020 (GS)_1.jpg",
            "Nike Air Jordan 6 Retro DMP 2020 (GS)_2.jpg",
            "Nike Air Jordan 6 Retro Midnight Navy (2000)_1.jpg",
            "Nike Air Jordan 6 Retro Midnight Navy (2000)_2.jpg",
            "Nike Air Jordan 6 Retro UNC_1.jpg",
            "Nike Air Jordan 6 Retro UNC_2.jpg",
            "Nike Jordan Stadium 90 Gris_1.jpg",
            "Nike Jordan Stadium 90 Gris_2.jpg",
            "Nike Jordan Stadium 90 White Amarillo de hoja caduca_1.jpg",
            "Nike Jordan Stadium 90 White Amarillo de hoja caduca_2.jpg",
            "Nike Jordan Stadium 90 White black_1.jpg",
            "Nike Jordan Stadium 90 White black_2.jpg",
            "Nike Jordan Stadium 90 White Morado_1.jpg",
            "Nike Jordan Stadium 90 White Morado_2.jpg",
            "Nike Jordan Stadium 90 White pink_1.jpg",
            "Nike Jordan Stadium 90 White pink_2.jpg",
            "Nike Jordan Stadium 90 White red_1.jpg",
            "Nike Jordan Stadium 90 White red_2.jpg",
            // Images from subfolders (with full path)
            "Air Jordan 10 - mandarin duck40-47/Air Jordan 10 - mandarin duck40-47_1.jpg",
            "Air Jordan 10 - mandarin duck40-47/Air Jordan 10 - mandarin duck40-47_3.jpg",
            "Air Jordan 10 - mandarin duck40-47/Air Jordan 10 - mandarin duck40-47_4.jpg",
            "Air Jordan 10 - mandarin duck40-47/Air Jordan 10 - mandarin duck40-47_6.jpg",
            "Air Jordan 10 - Miami Super Bowl40-47/Air Jordan 10 - Miami Super Bowl40-47_1.jpg",
            "Air Jordan 10 - Miami Super Bowl40-47/Air Jordan 10 - Miami Super Bowl40-47_4.jpg",
            "Air Jordan 10 - Miami Super Bowl40-47/Air Jordan 10 - Miami Super Bowl40-47_6.jpg",
            "Air Jordan 10 - New white black40-47/Air Jordan 10 - New white black40-47_3.jpg",
            "Air Jordan 10 - New white black40-47/Air Jordan 10 - New white black40-47_4.jpg",
            "Air Jordan 10 - New white black40-47/Air Jordan 10 - New white black40-47_5.jpg",
            "Air Jordan 10 - owl40-47/Air Jordan 10 - owl40-47_1.jpg",
            "Air Jordan 10 - shadow40-47/Air Jordan 10 - shadow40-47_1.jpg",
            "Air Jordan 10 - White black grass green40-47/Air Jordan 10 - White black grass green40-47_4.jpg",
            "Air Jordan 10 - White black grass green40-47/Air Jordan 10 - White black grass green40-47_5.jpg",
            "Air Jordan 10 - White black grass green40-47/Air Jordan 10 - White black grass green40-47_6.jpg",
            "Air Jordan 10 - White black red40-47/Air Jordan 10 - White black red40-47_3.jpg",
            "Air Jordan 10 - White black red40-47/Air Jordan 10 - White black red40-47_5.jpg",
            "Air Jordan 10 - White black40-47/Air Jordan 10 - White black40-47_1.jpg",
            "Air Jordan 10 - White brown40-47/Air Jordan 10 - White brown40-47_3.jpg",
            "Air Jordan 10 - White brown40-47/Air Jordan 10 - White brown40-47_5.jpg",
            "Air Jordan 10 - White brown40-47/Air Jordan 10 - White brown40-47_6.jpg",
            "Air Jordan 4 Retro black particle40-46/Air Jordan 4 Retro black particle40-46_1.jpg",
            "Air Jordan 4 Retro black particle40-46/Air Jordan 4 Retro black particle40-46_4.jpg",
            "Air Jordan 4 Retro black particle40-46/Air Jordan 4 Retro black particle40-46_6.jpg",
            "Air Jordan 4 Retro black particle40-46_1.jpg",
            "Air Jordan 4 Retro black particle40-46_4.jpg",
            "Air Jordan 4 Retro black particle40-46_6.jpg",
            "Air Jordan 4 Retro black-white36-46/Air Jordan 4 Retro black-white36-46_1.jpg",
            "Air Jordan 4 Retro black-white36-46/Air Jordan 4 Retro black-white36-46_5.jpg",
            "Air Jordan 4 Retro black-white36-46/Air Jordan 4 Retro black-white36-46_6.jpg",
            "Air Jordan 4 Retro black-white36-46_1.jpg",
            "Air Jordan 4 Retro black-white36-46_5.jpg",
            "Air Jordan 4 Retro black-white36-46_6.jpg",
            "Air Jordan 4 Retro denim40-46/Air Jordan 4 Retro denim40-46_1.jpg",
            "Air Jordan 4 Retro denim40-46/Air Jordan 4 Retro denim40-46_4.jpg",
            "Air Jordan 4 Retro denim40-46/Air Jordan 4 Retro denim40-46_6.jpg",
            "Air Jordan 4 Retro denim40-46_1.jpg",
            "Air Jordan 4 Retro denim40-46_4.jpg",
            "Air Jordan 4 Retro denim40-46_6.jpg",
            "Air Jordan 4 Retro granular moonlight40-46/Air Jordan 4 Retro granular moonlight40-46_1.jpg",
            "Air Jordan 4 Retro granular moonlight40-46/Air Jordan 4 Retro granular moonlight40-46_4.jpg",
            "Air Jordan 4 Retro granular moonlight40-46/Air Jordan 4 Retro granular moonlight40-46_6.jpg",
            "Air Jordan 4 Retro granular moonlight40-46_1.jpg",
            "Air Jordan 4 Retro granular moonlight40-46_4.jpg",
            "Air Jordan 4 Retro granular moonlight40-46_6.jpg",
            "Air Jordan 4 Retro particle beige40-46/Air Jordan 4 Retro particle beige40-46_1.jpg",
            "Air Jordan 4 Retro particle beige40-46/Air Jordan 4 Retro particle beige40-46_4.jpg",
            "Air Jordan 4 Retro particle beige40-46/Air Jordan 4 Retro particle beige40-46_6.jpg",
            "Air Jordan 4 Retro particle dark blue40-46/Air Jordan 4 Retro particle dark blue40-46_1.jpg",
            "Air Jordan 4 Retro particle dark blue40-46/Air Jordan 4 Retro particle dark blue40-46_2.jpg",
            "Air Jordan 4 Retro particle dark blue40-46/Air Jordan 4 Retro particle dark blue40-46_5.jpg",
            "Air Jordan 4 Retro particle dark blue40-46_1.jpg",
            "Air Jordan 4 Retro particle dark blue40-46_2.jpg",
            "Air Jordan 4 Retro particle dark blue40-46_5.jpg",
            "Air Jordan 4 Retro white orchid36-40/Air Jordan 4 Retro white orchid36-40_1.jpg",
            // Morant images
            "Morant 1st generation DR8785 800(36-46)/Morant 1st generation DR8785 800(36-46)_2.jpg",
            "Morant 1st generation DR8785 800(36-46)/Morant 1st generation DR8785 800(36-46)_5.jpg",
            "Morant 1st generation DR8785-001(36-46)/Morant 1st generation DR8785-001(36-46)_2.jpg",
            "Morant 1st generation DR8785-001(36-46)/Morant 1st generation DR8785-001(36-46)_5.jpg",
            "Morant 1st generation DR8786 102(36-46)/Morant 1st generation DR8786 102(36-46)_2.jpg",
            "Morant 1st generation DR8786 102(36-46)/Morant 1st generation DR8786 102(36-46)_5.jpg",
            "Morant 1st generation DR8786 102(36-46)/Morant 1st generation DR8786 102(36-46)_6.jpg",
            "Morant 1st generation DR8786 402(36-46)/Morant 1st generation DR8786 402(36-46)_2.jpg",
            "Morant 1st generation DR8786 402(36-46)/Morant 1st generation DR8786 402(36-46)_4.jpg",
            "Morant 1st generation DR8786 802(36-46)/Morant 1st generation DR8786 802(36-46)_1.jpg",
            "Morant 1st generation DR8786 802(36-46)/Morant 1st generation DR8786 802(36-46)_3.jpg",
            "Morant 1st generation DR8786-100(36-46)/Morant 1st generation DR8786-100(36-46)_5.jpg",
            "Morant 1st generation DR8786-400(36-46)/Morant 1st generation DR8786-400(36-46)_1.jpg",
            "Morant 1st generation FN6614 900(36-46)/Morant 1st generation FN6614 900(36-46)_3.jpg",
            "Morant 1st generation FN6614 900(36-46)/Morant 1st generation FN6614 900(36-46)_4.jpg",
            "Morant 1st generation FN6614 900(36-46)/Morant 1st generation FN6614 900(36-46)_6.jpg",
            "Morant 1st generation FQ4796-800(36-46)/Morant 1st generation FQ4796-800(36-46)_3.jpg",
            "Morant 1st generation FQ4796-800(36-46)/Morant 1st generation FQ4796-800(36-46)_5.jpg",
            "Morant 1st generation FQ4796-800(36-46)/Morant 1st generation FQ4796-800(36-46)_6.jpg",
            "Morant 1st generation FV1281-600(36-46)/Morant 1st generation FV1281-600(36-46)_2.jpg",
            "Morant 1st generation FV1281-600(36-46)/Morant 1st generation FV1281-600(36-46)_4.jpg",
            "Morant 1st generation FV1288 600(36-46)/Morant 1st generation FV1288 600(36-46)_2.jpg",
            "Morant 1st generation FV1288 600(36-46)/Morant 1st generation FV1288 600(36-46)_5.jpg",
            "Morant 1st generation FV1291-100(36-46)/Morant 1st generation FV1291-100(36-46)_4.jpg",
            "Morant 1st generation FV1291-100(36-46)/Morant 1st generation FV1291-100(36-46)_5.jpg",
            "Morant 1st generation FV6097 300(36-46)/Morant 1st generation FV6097 300(36-46)_1.jpg",
            "Morant 2nd generation FD7327 001(36-46)/Morant 2nd generation FD7327 001(36-46)_1.jpg",
            "Morant 2nd generation FD7327 101(36-46)/Morant 2nd generation FD7327 101(36-46)_1.jpg",
            "Morant 2nd generation FD7327-100(36-46)/Morant 2nd generation FD7327-100(36-46)_1.jpg",
            "Morant 2nd generation FD7327-500(36-46)/Morant 2nd generation FD7327-500(36-46)_1.jpg",
            "Morant 2nd generation FD7328 002(36-46)/Morant 2nd generation FD7328 002(36-46)_1.jpg",
            "Morant 2nd generation FD7328 006(36-46)/Morant 2nd generation FD7328 006(36-46)_1.jpg",
            "Morant 2nd generation FFD7328-701(36-46)/Morant 2nd generation FFD7328-701(36-46)_1.jpg",
            "Morant 2nd generation FV5633-405(36-46)/Morant 2nd generation FV5633-405(36-46)_1.jpg",
            "Morant 2nd generation FZ1516-001(36-46)/Morant 2nd generation FZ1516-001(36-46)_1.jpg",
            "Morant 2nd generation HQ2637 600(36-46)/Morant 2nd generation HQ2637 600(36-46)_1.jpg",
            "Morant 2nd generation HQ2637 601(36-46)/Morant 2nd generation HQ2637 601(36-46)_1.jpg",
            "Morant 2nd generation HQ2637 602(36-46)/Morant 2nd generation HQ2637 602(36-46)_1.jpg",
            "Morant 2nd generation HQ2637-603(36-46)/Morant 2nd generation HQ2637-603(36-46)_1.jpg",
            "Morant 2nd generation IB4007-900(36-46)/Morant 2nd generation IB4007-900(36-46)_1.jpg",
            "Morant 2nd generation IB5842 800(36-46)/Morant 2nd generation IB5842 800(36-46)_1.jpg",
            "Morant 2nd generation IF0302-601(36-46)/Morant 2nd generation IF0302-601(36-46)_1.jpg",
            "Morant 3rd generation HF2793-600/Morant 3rd generation HF2793-600_1.jpg",
            "Morant 3rd generation HF2793-601/Morant 3rd generation HF2793-601_1.jpg",
            "Morant 3rd generation HF2793-602/Morant 3rd generation HF2793-602_1.jpg",
            "Morant 3rd generation HF2793-603/Morant 3rd generation HF2793-603_1.jpg",
            "Morant 3rd generation HF2793-604/Morant 3rd generation HF2793-604_1.jpg",
            "Morant 3rd generation HF2793-605/Morant 3rd generation HF2793-605_1.jpg",
            "Morant 3rd generation HF2793-606/Morant 3rd generation HF2793-606_1.jpg",
            "Morant 3rd generation HF2793-607/Morant 3rd generation HF2793-607_1.jpg",
            "Morant 3rd generation HF2793-608/Morant 3rd generation HF2793-608_1.jpg",
            "Morant 3rd generation HF2793-609(36-46)/Morant 3rd generation HF2793-609(36-46)_1.jpg",
            "Morant 3rd generation HF2793-610/Morant 3rd generation HF2793-610_1.jpg",
            "Morant 3rd generation HF2794-100/Morant 3rd generation HF2794-100_1.jpg",
            "Morant 3rd generation IM0464-001/Morant 3rd generation IM0464-001_2.jpg",
            "Morant 3rd generation IM0464-001/Morant 3rd generation IM0464-001_3.jpg",
            "Morant 3rd generation IM0464-001_2.jpg",
            "Morant 3rd generation IM0464-001_3.jpg"
        ];

        // Image mapping system
        const imageMap = {
            // Normalize function to clean names for matching
            normalize: function(name) {
                return name
                    .toLowerCase()
                    .replace(/['"]/g, '')
                    .replace(/[()]/g, '')
                    .replace(/\d{1,2}-\d{1,2}/g, '') // Remove size ranges like "40-47"
                    .replace(/\d{6,}/g, '') // Remove long code numbers like "555088-134"
                    .replace(/\s+/g, ' ')
                    .trim();
            },
            
            // Build mapping from available images
            mapping: {},
            
            // Initialize mapping - supports multiple images per product (up to 3)
            init: function() {
                // Group images by base name (without _1.jpg, _2.jpg, etc.)
                const imageGroups = {};
                
                availableImages.forEach(imgPath => {
                    // Normalize path separators
                    let normalizedPath = imgPath.replace(/[\/\\]/g, '/');
                    
                    // Extract base name (remove _1.jpg, _2.jpg, _3.jpg, etc. and folder structure)
                    // For subfolders: "Air Jordan 10 - mandarin duck40-47/Air Jordan 10 - mandarin duck40-47_1.jpg"
                    // Extract: "Air Jordan 10 - mandarin duck40-47" (folder name) or base name
                    let baseName = normalizedPath;
                    
                    // If path contains folder (has /), use folder name as base name
                    if (normalizedPath.includes('/')) {
                        const parts = normalizedPath.split('/');
                        // Use folder name as base name (remove size ranges and codes)
                        const folderName = parts[parts.length - 2];
                        baseName = folderName.replace(/_\d+\.jpg$/, '').replace(/\.jpg$/, '');
                    } else {
                        // Remove _1.jpg, _2.jpg, etc.
                        baseName = normalizedPath.replace(/_\d+\.jpg$/, '').replace(/\.jpg$/, '');
                    }
                    
                    if (!imageGroups[baseName]) {
                        imageGroups[baseName] = [];
                    }
                    // Store full path (ensure imagens_produtos/ prefix)
                    const fullPath = normalizedPath.startsWith('imagens_produtos/') ? normalizedPath : `imagens_produtos/${normalizedPath}`;
                    imageGroups[baseName].push(fullPath);
                });
                
                // Store up to 3 images per product base name
                for (const [baseName, images] of Object.entries(imageGroups)) {
                    // Sort images to prefer _1.jpg, then _2.jpg, then _3.jpg, etc.
                    images.sort((a, b) => {
                        const aMatch = a.match(/_(\d+)\.jpg$/);
                        const bMatch = b.match(/_(\d+)\.jpg$/);
                        const aNum = aMatch ? parseInt(aMatch[1]) : 0;
                        const bNum = bMatch ? parseInt(bMatch[1]) : 0;
                        return aNum - bNum;
                    });
                    // Store up to 3 images
                    this.mapping[baseName] = images.slice(0, 3);
                }
                
                console.log('âœ… Mapeamento de imagens inicializado:', Object.keys(this.mapping).length, 'produtos base');
            },
            
            // Try to find image by product name (for new images added to folder)
            findImageByName: function(productName) {
                // Normalize product name
                const normalizedProduct = this.normalize(productName);
                
                // Try exact match first
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    const normalizedImg = this.normalize(imgName);
                    if (normalizedImg === normalizedProduct) {
                        return path;
                    }
                }
                
                // Try partial match
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    const normalizedImg = this.normalize(imgName);
                    if (normalizedProduct.includes(normalizedImg) || normalizedImg.includes(normalizedProduct)) {
                        return path;
                    }
                }
                
                return null;
            },
            
            // Get images for a product - returns array of up to 3 images
            getImages: function(productName) {
                // Normalize product name
                const normalizedProduct = this.normalize(productName);
                
                let bestMatch = null;
                let bestScore = 0;
                
                // Try to find the best matching image group
                for (const [imgName, images] of Object.entries(this.mapping)) {
                    const normalizedImg = this.normalize(imgName);
                    let score = 0;
                    
                    // Exact match = highest score
                    if (normalizedImg === normalizedProduct) {
                        score = 100;
                    }
                    // Very close match (one contains the other and they're similar length)
                    else if ((normalizedProduct.includes(normalizedImg) || normalizedImg.includes(normalizedProduct)) && 
                             Math.abs(normalizedProduct.length - normalizedImg.length) < 10) {
                        // Calculate similarity based on common words
                        const productWords = normalizedProduct.split(/\s+/).filter(w => w.length > 2);
                        const imgWords = normalizedImg.split(/\s+/).filter(w => w.length > 2);
                        const commonWords = productWords.filter(w => imgWords.includes(w));
                        score = (commonWords.length / Math.max(productWords.length, imgWords.length)) * 80;
                    }
                    // Partial match with key words
                    else {
                        const productWords = normalizedProduct.split(/\s+/).filter(p => 
                            p.length > 3 && 
                            !['retro', 'air', 'jordan', 'jordans', 'nike', 'high', 'mid', 'low', 'og', 'gs', 'white', 'black', 'blue', 'red'].includes(p.toLowerCase())
                        );
                        const imgWords = normalizedImg.split(/\s+/).filter(p => 
                            p.length > 3 && 
                            !['retro', 'air', 'jordan', 'jordans', 'nike', 'high', 'mid', 'low', 'og', 'gs', 'white', 'black', 'blue', 'red'].includes(p.toLowerCase())
                        );
                        
                        if (productWords.length > 0 && imgWords.length > 0) {
                            const matches = productWords.filter(p => 
                                imgWords.some(ip => ip === p || (ip.includes(p) && p.length > 4) || (p.includes(ip) && ip.length > 4))
                            );
                            // Need at least 70% of key words to match
                            if (matches.length / productWords.length >= 0.7 && matches.length >= 2) {
                                score = (matches.length / Math.max(productWords.length, imgWords.length)) * 60;
                            }
                        }
                    }
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestMatch = images; // Array of images
                    }
                }
                
                // Only return if score is high enough (strict matching)
                return bestScore >= 70 ? bestMatch : null;
            },
            
            // Get single image (for backward compatibility)
            getImage: function(productName) {
                const images = this.getImages(productName);
                return images && images.length > 0 ? images[0] : null;
            },
            
            // Track which images are already assigned
            assignedImages: new Set(),
            
            // Get image with assignment tracking (ensures one image per product only)
            getImageWithTracking: function(productName) {
                const image = this.getImage(productName);
                if (image && !this.assignedImages.has(image)) {
                    this.assignedImages.add(image);
                    return image;
                }
                return null;
            }
        };

        // Initialize image mapping
        imageMap.init();

        // Get product images - products can have up to 3 images
        // Images are matched by name from imagens_produtos folder
        // Each image is associated with only one product (best match)
        function getProductImages(product) {
            // Product already has images property assigned if it has a match
            if (product.images && Array.isArray(product.images)) {
                return product.images;
            }
            // Fallback to single image for backward compatibility
            if (product.image) {
                return [product.image];
            }
            return [];
        }
        
        // Get first product image (for backward compatibility)
        function getProductImage(product) {
            const images = getProductImages(product);
            return images.length > 0 ? images[0] : null;
        }

        // Create placeholder HTML
        function createPlaceholderHTML(product) {
            const icon = (product && product.category === 'roupas') ? 'ðŸ‘•' : 'ðŸ‘Ÿ';
            return `
                <div class="flex flex-col items-center justify-center p-6 text-center h-full">
                    <div class="text-7xl mb-4 animate-pulse">${icon}</div>
                    <div class="text-2xl mb-2 font-black text-red-500 uppercase">STREETMOOD</div>
                    <div class="text-gray-400 text-sm mb-2">Sem foto disponÃ­vel â€” em breve.</div>
                    <div class="text-gray-500 text-xs max-w-xs">Em breve terÃ¡s acesso<br>Ã  visualizaÃ§Ã£o completa deste modelo</div>
                </div>
            `;
        }

        // Format product name - remove codes and format size
        function formatProductName(product) {
            let name = product.name;
            // Remove product codes (like 555088-134, CD4487-100, etc.)
            name = name.replace(/\s+\d{6,}[-\s]?\d{0,6}/g, '');
            // Remove codes at the end (like "555088-134")
            name = name.replace(/\s+\d{6,}-\d{3,}/g, '');
            // Clean up multiple spaces
            name = name.replace(/\s+/g, ' ').trim();
            return name;
        }
        
        // Format size display
        function formatSize(size) {
            if (!size) return '';
            // Convert "36-40" to "tamanhos do 36 ao 40"
            const match = size.match(/(\d+)-(\d+)/);
            if (match) {
                return `tamanhos do ${match[1]} ao ${match[2]}`;
            }
            return size;
        }
        
        // Render product card
        function renderProductCard(product) {
            const images = getProductImages(product);
            const image = images.length > 0 ? images[0] : null;
            // Todos os produtos estÃ£o disponÃ­veis no STREETMOOD - sem badges de tipo
            const badge = '';
            
            const hasImage = image !== null;
            const formattedName = formatProductName(product);
            const formattedSize = formatSize(product.size);
            
            let imageHTML = '';
            if (hasImage) {
                // If multiple images, show first image with indicator
                if (images.length > 1) {
                    imageHTML = `<div class="relative w-full h-full">
                                    <img src="${image}" 
                                         alt="${formattedName}" 
                                         class="product-image w-full h-full object-contain"
                                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                    <div class="absolute top-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded-full font-semibold">
                                        ${images.length} fotos
                                    </div>
                                    <div class="hidden absolute inset-0 flex flex-col items-center justify-center p-4 text-center">
                                        <div class="text-5xl mb-2 animate-pulse">${product.category === 'roupas' ? 'ðŸ‘•' : 'ðŸ‘Ÿ'}</div>
                                        <div class="text-xs text-gray-400">Sem foto disponÃ­vel â€” em breve.</div>
                                    </div>
                                </div>`;
                } else {
                    imageHTML = `<img src="${image}" 
                                      alt="${formattedName}" 
                                      class="product-image w-full h-full object-contain"
                                      onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                               <div class="hidden absolute inset-0 flex flex-col items-center justify-center p-4 text-center">
                                   <div class="text-5xl mb-2 animate-pulse">${product.category === 'roupas' ? 'ðŸ‘•' : 'ðŸ‘Ÿ'}</div>
                                   <div class="text-xs text-gray-400">Sem foto disponÃ­vel â€” em breve.</div>
                               </div>`;
                }
            } else {
                const icon = product.category === 'roupas' ? 'ðŸ‘•' : 'ðŸ‘Ÿ';
                imageHTML = `<div class="flex flex-col items-center justify-center p-4 text-center h-full">
                                <div class="text-5xl mb-2 animate-pulse">${icon}</div>
                                <div class="text-xs text-gray-400">Sem foto disponÃ­vel â€” em breve.</div>
                            </div>`;
            }
            
            return `
                <div class="product-card glass-effect rounded-2xl p-4 cursor-pointer" 
                     onclick="openModal(${product.id})"
                     data-aos="fade-up"
                     data-name="${product.name.toLowerCase()}"
                     data-price="${product.price_eur}"
                     data-type="${product.tipo}">
                    <div class="relative mb-4 bg-gray-800 rounded-xl overflow-hidden h-48 flex items-center justify-center">
                        ${imageHTML}
                    </div>
                    <div class="space-y-2">
                        <h3 class="font-bold text-sm uppercase leading-tight line-clamp-2">${formattedName}</h3>
                        ${formattedSize ? `<p class="text-gray-400 text-xs">${formattedSize}</p>` : ''}
                        <div class="flex justify-between items-center">
                            <p class="text-red-500 font-black text-lg">${product.price_eur}â‚¬</p>
                        </div>
                        <button class="w-full mt-2 py-2 glass-effect rounded-lg text-sm font-semibold hover:bg-white/10 transition-colors">
                            Ver mais
                        </button>
                    </div>
                </div>
            `;
        }

        // Render products grid with pagination
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (currentProducts.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-400">Nenhum produto encontrado.</div>';
                renderPagination();
                return;
            }
            
            // Calculate pagination
            const totalPages = Math.ceil(currentProducts.length / productsPerPage);
            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const productsToShow = currentProducts.slice(startIndex, endIndex);
            
            grid.innerHTML = productsToShow.map(renderProductCard).join('');
            AOS.refresh();
            
            // Render pagination
            renderPagination(totalPages);
        }

        // Render pagination buttons
        function renderPagination(totalPages = 1) {
            const paginationDiv = document.getElementById('pagination');
            if (totalPages <= 1) {
                paginationDiv.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `
                    <button onclick="goToPage(${currentPage - 1})" class="glass-effect px-4 py-2 rounded-lg font-semibold hover:bg-white/10 transition-colors">
                        â† Anterior
                    </button>
                `;
            }
            
            // Page numbers
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage < maxVisiblePages - 1) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            if (startPage > 1) {
                paginationHTML += `<button onclick="goToPage(1)" class="glass-effect px-4 py-2 rounded-lg font-semibold hover:bg-white/10 transition-colors">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="px-2 text-gray-500">...</span>`;
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                if (i === currentPage) {
                    paginationHTML += `
                        <button class="btn-primary px-4 py-2 rounded-lg font-semibold">
                            ${i}
                        </button>
                    `;
                } else {
                    paginationHTML += `
                        <button onclick="goToPage(${i})" class="glass-effect px-4 py-2 rounded-lg font-semibold hover:bg-white/10 transition-colors">
                            ${i}
                        </button>
                    `;
                }
            }
            
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="px-2 text-gray-500">...</span>`;
                }
                paginationHTML += `<button onclick="goToPage(${totalPages})" class="glass-effect px-4 py-2 rounded-lg font-semibold hover:bg-white/10 transition-colors">${totalPages}</button>`;
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `
                    <button onclick="goToPage(${currentPage + 1})" class="glass-effect px-4 py-2 rounded-lg font-semibold hover:bg-white/10 transition-colors">
                        PrÃ³xima â†’
                    </button>
                `;
            }
            
            paginationDiv.innerHTML = paginationHTML;
        }

        // Go to specific page
        function goToPage(page) {
            currentPage = page;
            renderProducts();
            // Scroll to top of products grid
            document.getElementById('productsGrid').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Filter products - Todos os produtos estÃ£o disponÃ­veis no STREETMOOD
        function filterProducts() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const sort = document.getElementById('sortSelect').value;
            const category = document.getElementById('categorySelect').value;
            
            let filtered = window.products || [];
            
            // Tab filter - filter by sneakers or roupas
            if (activeTab === 'sneakers') {
                // Show only sneakers (category !== "roupas" or no category field)
                filtered = filtered.filter(p => !p.category || p.category !== 'roupas');
            } else if (activeTab === 'roupas') {
                // Show only clothing (category === "roupas")
                filtered = filtered.filter(p => p.category === 'roupas');
            }
            
            // Category filter (stock/drop) - applies within the current tab
            if (category === 'stock') {
                filtered = filtered.filter(p => p.tipo === 'stock');
            } else if (category === 'drop') {
                filtered = filtered.filter(p => p.tipo === 'drop');
            }
            // If category === 'all', show all products in current tab
            
            // Search filter
            if (search) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(search) ||
                    (p.size && p.size.toLowerCase().includes(search)) ||
                    (p.tipo && p.tipo.toLowerCase().includes(search))
                );
            }
            
            // Sort - produtos com imagens primeiro
            filtered.sort((a, b) => {
                // Se for "todos", produtos com imagem primeiro, depois aplicar ordenaÃ§Ã£o
                if (sort === 'all') {
                    const aHasImage = a.image ? 1 : 0;
                    const bHasImage = b.image ? 1 : 0;
                    if (aHasImage !== bHasImage) {
                        return bHasImage - aHasImage; // Com imagem primeiro
                    }
                    // Depois ordenar por ID (mais recente primeiro)
                    return (b.id || 0) - (a.id || 0);
                }
                
                // Primeiro: produtos com imagem aparecem antes dos sem imagem (exceto para "todos")
                const aHasImage = a.image ? 1 : 0;
                const bHasImage = b.image ? 1 : 0;
                if (aHasImage !== bHasImage) {
                    return bHasImage - aHasImage; // Com imagem primeiro
                }
                
                // Depois: aplicar ordenaÃ§Ã£o selecionada
                if (sort === 'price-asc') {
                    return (a.price_eur || 0) - (b.price_eur || 0);
                } else if (sort === 'price-desc') {
                    return (b.price_eur || 0) - (a.price_eur || 0);
                } else if (sort === 'name') {
                    return (a.name || '').localeCompare(b.name || '');
                } else {
                    // Mais recentes (por ID, maior ID = mais recente)
                    return (b.id || 0) - (a.id || 0);
                }
            });
            
            currentProducts = filtered;
            currentPage = 1; // Reset to first page when filtering
            renderProducts();
        }

        // Switch tab
        function switchTab(tab) {
            activeTab = tab;
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'text-white');
                btn.classList.add('text-gray-400');
            });
            const activeBtn = document.querySelector(`[data-tab="${tab}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active', 'text-white');
                activeBtn.classList.remove('text-gray-400');
            }
            // Reset to first page when switching tabs
            currentPage = 1;
            filterProducts();
        }

        // Open modal
        function openModal(productId) {
            const products = window.products || [];
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            currentProduct = product;
            const modal = document.getElementById('productModal');
            const images = getProductImages(product);
            
            // Format product name and size for modal
            const formattedName = formatProductName(product);
            const formattedSize = formatSize(product.size);
            const modalTitle = formattedName + (formattedSize ? `, ${formattedSize}` : '');
            
            // Set modal content
            document.getElementById('modalTitle').textContent = modalTitle;
            document.getElementById('modalPrice').textContent = `${product.price_eur}â‚¬`;
            document.getElementById('modalTag').textContent = 'DisponÃ­vel no STREETMOOD';
            document.getElementById('modalDescription').textContent = product.desc || 
                `Produto premium importado. Envio grÃ¡tis. Caixa STREETMOOD incluÃ­da. Caixa original disponÃ­vel (+5â‚¬).`;
            
            // Todos os produtos estÃ£o disponÃ­veis - sem badge de tipo
            document.getElementById('modalBadge').innerHTML = '';
            
            // Set viewer with placeholder if no image
            const viewer = document.getElementById('modalViewer');
            viewer.innerHTML = '';
            
            // Check if images exist or use placeholder
            if (images.length > 0) {
                if (images.length === 1) {
                    // Single image
                    const img = new Image();
                    img.onload = function() {
                        viewer.innerHTML = `
                            <img src="${images[0]}" 
                                 alt="${formattedName}" 
                                 class="max-w-full max-h-full object-contain rounded-xl">
                        `;
                    };
                    img.onerror = function() {
                        viewer.innerHTML = createPlaceholderHTML(product);
                    };
                    img.src = images[0];
                } else {
                    // Multiple images - create carousel
                    let carouselHTML = `
                        <div class="relative w-full h-full">
                            <div id="imageCarousel" class="relative w-full h-full overflow-hidden rounded-xl">
                                ${images.map((img, index) => `
                                    <div class="carousel-slide ${index === 0 ? 'active' : 'hidden'} absolute inset-0 flex items-center justify-center">
                                        <img src="${img}" 
                                             alt="${formattedName} - Foto ${index + 1}" 
                                             class="max-w-full max-h-full object-contain rounded-xl"
                                             onerror="this.parentElement.style.display='none'">
                                    </div>
                                `).join('')}
                            </div>
                            ${images.length > 1 ? `
                                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2">
                                    ${images.map((_, index) => `
                                        <button onclick="showCarouselImage(${index})" 
                                                class="carousel-dot ${index === 0 ? 'active' : ''} w-2 h-2 rounded-full bg-white/60 hover:bg-white transition-colors"></button>
                                    `).join('')}
                                </div>
                                ${images.length > 1 ? `
                                    <button onclick="previousCarouselImage()" class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/60 text-white p-2 rounded-full hover:bg-black/80 transition-colors">
                                        â†
                                    </button>
                                    <button onclick="nextCarouselImage()" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/60 text-white p-2 rounded-full hover:bg-black/80 transition-colors">
                                        â†’
                                    </button>
                                ` : ''}
                            ` : ''}
                        </div>
                    `;
                    viewer.innerHTML = carouselHTML;
                    
                    // Store current image index
                    window.currentCarouselIndex = 0;
                    window.currentCarouselImages = images;
                }
            } else {
                viewer.innerHTML = createPlaceholderHTML(product);
            }
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }
        
        // Carousel functions
        function showCarouselImage(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const dots = document.querySelectorAll('.carousel-dot');
            
            slides.forEach((slide, i) => {
                if (i === index) {
                    slide.classList.remove('hidden');
                    slide.classList.add('active');
                } else {
                    slide.classList.add('hidden');
                    slide.classList.remove('active');
                }
            });
            
            dots.forEach((dot, i) => {
                if (i === index) {
                    dot.classList.add('active');
                    dot.classList.remove('bg-white/60');
                    dot.classList.add('bg-white');
                } else {
                    dot.classList.remove('active');
                    dot.classList.add('bg-white/60');
                    dot.classList.remove('bg-white');
                }
            });
            
            window.currentCarouselIndex = index;
        }
        
        function nextCarouselImage() {
            if (!window.currentCarouselImages || window.currentCarouselImages.length === 0) return;
            const nextIndex = (window.currentCarouselIndex + 1) % window.currentCarouselImages.length;
            showCarouselImage(nextIndex);
        }
        
        function previousCarouselImage() {
            if (!window.currentCarouselImages || window.currentCarouselImages.length === 0) return;
            const prevIndex = (window.currentCarouselIndex - 1 + window.currentCarouselImages.length) % window.currentCarouselImages.length;
            showCarouselImage(prevIndex);
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            document.body.style.overflow = '';
        }

        // Contact seller (Buy/DM button)
        function contactSeller() {
            if (!currentProduct) return;
            
            const name = currentProduct.name;
            const size = currentProduct.size || '';
            const msg = encodeURIComponent(`OlÃ¡ STREETMOOD ðŸ‘Ÿ quero comprar o ${name}${size ? ' (T:' + size + ')' : ''} ainda estÃ¡ disponÃ­vel?`);
            window.open(`https://wa.me/351929461628?text=${msg}`, '_blank');
        }

        // Reserve product
        function reserveProduct() {
            if (!currentProduct) return;
            
            const name = currentProduct.name;
            const msg = encodeURIComponent(`OlÃ¡ STREETMOOD ðŸ‘Ÿ quero reservar o ${name}. Podes enviar fotos reais antes do envio?`);
            window.open(`https://wa.me/351929461628?text=${msg}`, '_blank');
        }

        // Open WhatsApp (header button)
        function openWhatsApp() {
            const msg = encodeURIComponent('OlÃ¡ STREETMOOD! Quero saber mais sobre os vossos produtos.');
            window.open(`https://wa.me/351929461628?text=${msg}`, '_blank');
        }

        // Close modal on ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Assign images to products (up to 3 images per product, best match only)
        function assignImagesToProducts() {
            if (!window.products || window.products.length === 0) {
                return;
            }
            
            // Reset assigned images for fresh matching
            imageMap.assignedImages.clear();
            
            // Create array to store products with their match scores
            const productsWithScores = window.products.map(product => {
                // Try to find matching images (up to 3)
                const images = imageMap.getImages(product.name);
                const normalizedProduct = imageMap.normalize(product.name);
                let bestScore = 0;
                
                if (images && images.length > 0) {
                    // Calculate score for the image group
                    // Find the base name that matches
                    for (const [imgName, imgGroup] of Object.entries(imageMap.mapping)) {
                        const normalizedImg = imageMap.normalize(imgName);
                        let score = 0;
                        
                        // Exact match = highest score
                        if (normalizedImg === normalizedProduct) {
                            score = 100;
                        }
                        // Very close match
                        else if ((normalizedProduct.includes(normalizedImg) || normalizedImg.includes(normalizedProduct)) && 
                                 Math.abs(normalizedProduct.length - normalizedImg.length) < 10) {
                            const productWords = normalizedProduct.split(/\s+/).filter(w => w.length > 2);
                            const imgWords = normalizedImg.split(/\s+/).filter(w => w.length > 2);
                            const commonWords = productWords.filter(w => imgWords.includes(w));
                            score = (commonWords.length / Math.max(productWords.length, imgWords.length)) * 80;
                        }
                        // Partial match
                        else {
                            const productWords = normalizedProduct.split(/\s+/).filter(p => 
                                p.length > 3 && 
                                !['retro', 'air', 'jordan', 'jordans', 'nike', 'high', 'mid', 'low', 'og', 'gs', 'white', 'black', 'blue', 'red'].includes(p.toLowerCase())
                            );
                            const imgWords = normalizedImg.split(/\s+/).filter(p => 
                                p.length > 3 && 
                                !['retro', 'air', 'jordan', 'jordans', 'nike', 'high', 'mid', 'low', 'og', 'gs', 'white', 'black', 'blue', 'red'].includes(p.toLowerCase())
                            );
                            
                            if (productWords.length > 0 && imgWords.length > 0) {
                                const matches = productWords.filter(p => 
                                    imgWords.some(ip => ip === p || (ip.includes(p) && p.length > 4) || (p.includes(ip) && ip.length > 4))
                                );
                                if (matches.length / productWords.length >= 0.7 && matches.length >= 2) {
                                    score = (matches.length / Math.max(productWords.length, imgWords.length)) * 60;
                                }
                            }
                        }
                        
                        if (score > bestScore && JSON.stringify(imgGroup) === JSON.stringify(images)) {
                            bestScore = score;
                        }
                    }
                }
                
                return { product, images: images || [], score: bestScore };
            });
            
            // Sort by score (highest first) - best matches get images first
            productsWithScores.sort((a, b) => b.score - a.score);
            
            // Assign images to products (up to 3 images per product, no duplicates)
            const usedImages = new Set();
            
            for (const { product, images, score } of productsWithScores) {
                if (images.length > 0 && score >= 70) {
                    // Filter out already used images
                    const availableImages = images.filter(img => !usedImages.has(img));
                    
                    if (availableImages.length > 0) {
                        // Mark images as used
                        availableImages.forEach(img => usedImages.add(img));
                        
                        // Assign up to 3 images to product
                        product.images = availableImages.slice(0, 3);
                        // Also set first image for backward compatibility
                        product.image = availableImages[0];
                    } else {
                        product.images = [];
                        product.image = null;
                    }
                } else {
                    product.images = [];
                    product.image = null;
                }
            }
            
            const productsWithImages = window.products.filter(p => p.images && p.images.length > 0).length;
            const totalImages = window.products.reduce((sum, p) => sum + (p.images ? p.images.length : 0), 0);
            console.log(`âœ… ${productsWithImages} produtos com imagens (${totalImages} imagens totais) de ${window.products.length} produtos`);
        }

        // Initialize
        async function init() {
            // Wait a bit to ensure products are loaded
            if (!window.products || window.products.length === 0) {
                console.warn('âš ï¸ Aguardando carregamento de produtos...');
                let attempts = 0;
                while ((!window.products || window.products.length === 0) && attempts < 50) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }
            }
            
            if (window.products && window.products.length > 0) {
                console.log('âœ… Produtos carregados:', window.products.length);
                
                // Remove duplicates - keep only first occurrence of each product name
                const seenNames = new Set();
                const uniqueProducts = [];
                for (const product of window.products) {
                    const normalizedName = product.name.toLowerCase().trim();
                    if (!seenNames.has(normalizedName)) {
                        seenNames.add(normalizedName);
                        uniqueProducts.push(product);
                    }
                }
                
                // Limit to 200 products (mix of sneakers and roupas)
                // Prioritize products with images, then balance sneakers and roupas
                const sneakers = uniqueProducts.filter(p => !p.category || p.category !== 'roupas');
                const roupas = uniqueProducts.filter(p => p.category === 'roupas');
                
                // Take up to 150 sneakers and 50 roupas (or adjust based on availability)
                const maxSneakers = Math.min(150, sneakers.length);
                const maxRoupas = Math.min(50, roupas.length);
                const selectedSneakers = sneakers.slice(0, maxSneakers);
                const selectedRoupas = roupas.slice(0, maxRoupas);
                
                // Combine and limit to 200 total
                window.products = [...selectedSneakers, ...selectedRoupas].slice(0, 200);
                
                console.log(`âœ… ${window.products.length} produtos Ãºnicos (${selectedSneakers.length} sneakers, ${selectedRoupas.length} roupas)`);
                
                // Assign images to products (one image per product, best match only)
                assignImagesToProducts();
                // Sort products: with images first, then by ID (most recent first)
                window.products.sort((a, b) => {
                    // Primeiro: produtos com imagem aparecem antes dos sem imagem
                    const aHasImage = a.image ? 1 : 0;
                    const bHasImage = b.image ? 1 : 0;
                    if (aHasImage !== bHasImage) {
                        return bHasImage - aHasImage; // Com imagem primeiro
                    }
                    // Depois: ordenar por ID (mais recente primeiro)
                    return (b.id || 0) - (a.id || 0);
                });
                // Show all products (with or without images)
                currentProducts = window.products;
                currentPage = 1;
                renderProducts();
            } else {
                console.error('âŒ Nenhum produto foi carregado!');
                document.getElementById('productsGrid').innerHTML = '<div class="col-span-full text-center py-12 text-gray-400">Erro ao carregar produtos. Por favor, recarrega a pÃ¡gina.</div>';
            }
        }

        // Start initialization
        init();
    </script>
</body>
</html>
